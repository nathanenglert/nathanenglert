function getElement(cache,obj,id){if(!cache[id]){cache[id]=obj.contentDocument.getElementById(id).getElementsByTagName("path")[0]}return cache[id]}Vue.component("previewImage",{computed:{imagePath:function(){return"img/jersey-"+this.model.id+".svg"},selectorId:function(){return"preview-"+this.model.id}},data:function(){return{_cache:{},_object:false}},mounted:function(){this.$data._object=document.getElementById(this.selectorId);var refView=this.model;var refObj=this.$data._object;var refCache=this.$data._cache;Events.$on("color:selected",function(part,hex){if(part.personalizationType&&part.personalizationType.length>0){var selector=part.id+"Color";refView[selector]=hex;return}var sel=refView.id+"-"+part.id;getElement(refCache,refObj,sel).style.fill=hex});Events.$on("text:changed",function(part,text){var selector=part.id+"Text";refView[selector]=text})},props:["model"],template:"#template-preview-image"});Vue.component("preview",{data:function(){return{}},methods:{updateView:function(id){this.views.forEach(function(v){v.active=v.id===id})}},props:["views"],template:"#template-preview"});Vue.component("colorPicker",{data:function(){return{}},methods:{select:function(n){var p=this.part;this.colors.forEach(function(c,i){c.active=i===n;if(!c.active)return;Events.$emit("color:selected",p,c.hex)})}},props:["part","colors"],template:"#template-color-picker"});Vue.component("componentItem",{data:function(){return{personalizationText:this.model.personalizationDefault}},methods:{select:function(){this.$emit("select",this.model.id)}},watch:{personalizationText:function(val){var type=this.model.personalizationType;Events.$emit(type+":changed",this.model,val)}},props:["model"],template:"#template-component-item"});var Events=new Vue;var App=new Vue({created:function(){var product=ProductService.get(0);this.components=product.parts;this.views=product.views},el:"#app",data:{components:[],views:[]},methods:{onComponentSelect:function(id){this.components.forEach(function(c){c.active=c.id===id&&!c.active})}}});